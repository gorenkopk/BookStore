@page "/books"
@using Volo.Abp.Application.Dtos
@using BookStore.Books
@using BookStore.Localization
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<BookStoreResource> L
@inject AbpBlazorMessageLocalizerHelper<BookStoreResource> LH
@inherits AbpCrudPageBase<IBookAppService, BookDto, Guid, PagedAndSortedResultRequestDto, CreateUpdateBookDto>

<Card>
        <CardHeader>
            <Row Class="justify-content-between">
                <Column ColumnSize="ColumnSize.IsAuto">
                    <h2>@L["Books"]</h2>
                </Column>
                <Column ColumnSize="ColumnSize.IsAuto">
                    <Button Color="Color.Primary"
                            Clicked="OpenCreateModalAsync">
                        @L["NewBook"]
                        </Button>
                    </Column>
            </Row>
        </CardHeader>
        <CardBody>
            <DataGrid TItem="BookDto"
                      Data="Entities"
                      ReadData="OnDataGridReadAsync"
                      TotalItems="TotalCount"
                      ShowPager="true"
                      PageSize="PageSize">
                <DataGridColumns>
                    <DataGridColumn TItem="BookDto"
                                    Field="@nameof(BookDto.Name)"
                                    Caption="@L["Name"]"></DataGridColumn>
                    <DataGridColumn TItem="BookDto"
                                    Field="@nameof(BookDto.Type)"
                                    Caption="@L["Type"]">
                        <DisplayTemplate>
                            @L[$"Enum:BookType:{(int)context.Type}"]
                        </DisplayTemplate>
                    </DataGridColumn>
                    <DataGridColumn TItem="BookDto"
                                    Field="@nameof(BookDto.PublishDate)"
                                    Caption="@L["PublishDate"]">
                        <DisplayTemplate>
                            @context.PublishDate.ToShortDateString()
                        </DisplayTemplate>
                    </DataGridColumn>
                    <DataGridColumn TItem="BookDto"
                                    Field="@nameof(BookDto.Price)"
                                    Caption="@L["Price"]">
                    </DataGridColumn>
                    <DataGridColumn TItem="BookDto"
                                    Field="@nameof(BookDto.CreationTime)"
                                    Caption="@L["CreationTime"]">
                        <DisplayTemplate>
                            @context.CreationTime.ToLongDateString()
                        </DisplayTemplate>
                    </DataGridColumn>
                </DataGridColumns>
            </DataGrid>
        </CardBody>
    </Card>